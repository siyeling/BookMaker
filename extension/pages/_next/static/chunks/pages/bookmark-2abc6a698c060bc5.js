(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[549],{8727:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/bookmark",function(){return t(5343)}])},5343:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return u}});var o=t(5893);t(5373);var a=t(7294),r=" bg-indigo-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",i=e=>{let{bookmark:s,index:t,setBookmarks:i}=e,[n,c]=(0,a.useState)(s.url),[l,u]=(0,a.useState)(s.command);(0,a.useEffect)(()=>{m()},[n,l]);let d=s.key;async function m(){let e=(await chrome.storage.local.get("bookmarks")).bookmarks.toSpliced(t,1,{command:l,url:n,key:d});await chrome.storage.local.set({bookmarks:e}),i(()=>e)}async function h(){let e=(await chrome.storage.local.get("bookmarks")).bookmarks.toSpliced(t,1);await chrome.storage.local.set({bookmarks:e}),i(()=>e)}return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsxs)("div",{className:"flex-col",children:[(0,o.jsx)("div",{className:"py-1 px-2",children:(0,o.jsx)("button",{className:"w-28 bg-indigo-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",onClick:()=>{chrome.hasOwnProperty("tabs")&&chrome.tabs.query({active:!0,currentWindow:!0}).then(e=>{let s=e[0].id;if(s){if(0===n.indexOf("javascript:")){let e="javascript:"+decodeURIComponent(n.replace("javascript:",""));chrome.scripting.executeScript({target:{tabId:s},func:e=>{document.dispatchEvent(new CustomEvent("run_js",{detail:e}))},args:[e]})}else -1!==n.indexOf("://")&&chrome.scripting.executeScript({target:{tabId:s},func:e=>{window.location.href=e},args:[n]})}})},children:"fire"})}),(0,o.jsx)("div",{className:"py-1 px-2",children:(0,o.jsx)("button",{onClick:()=>{chrome.hasOwnProperty("tabs")&&chrome.tabs.query({active:!0,currentWindow:!0}).then(e=>{"string"==typeof e[0].url&&c(e[0].url)})},className:"w-28"+r,children:"register currentUrl"})}),(0,o.jsx)("div",{className:"py-1 px-2",children:(0,o.jsx)("button",{className:"w-28"+r,onClick:h,children:"remove"})})]}),(0,o.jsxs)("div",{className:"flex-col w-64",children:[(0,o.jsx)("div",{children:"action"}),(0,o.jsx)("textarea",{className:"w-64 h-12 resize-none ring-1 focus:ring-2",value:n,placeholder:"Write URL or bookmarklet",onChange:e=>{c(e.currentTarget.value)}}),(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"w-16",children:"command"}),(0,o.jsx)("input",{className:"ring-1 focus:ring-2 w-32",value:l,placeholder:"Write press key",onChange:e=>{u(e.currentTarget.value)}}),(0,o.jsx)("button",{className:"w-16"+r,children:"clear"})]})]})]})}),(0,o.jsx)("div",{className:"py-1"})]})};let n={url:"",command:"",key:""};var c=()=>{let[e,s]=(0,a.useState)([]);async function t(){n.key=Math.random().toString(32).substring(2),console.log(n);let t=[...e,n];await chrome.storage.local.set({bookmarks:t}),s(()=>t)}return(0,a.useEffect)(()=>{(async function(){let e=await chrome.storage.local.get("bookmarks");n.key=Math.random().toString(32).substring(2),e.bookmarks||await chrome.storage.local.set({bookmarks:[n]}),s(s=>e.bookmarks?[...s,...e.bookmarks]:[n])})()},[]),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{children:[e.map((e,t)=>(0,o.jsx)("div",{className:"ring-1",children:(0,o.jsx)(i,{bookmark:e,index:t,setBookmarks:s})},e.key)),(0,o.jsx)("button",{className:"w-96"+r,onClick:t,children:"add"})]})})},l=()=>(0,o.jsx)(c,{}),u=function(){return(0,o.jsx)(l,{})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8727)}),_N_E=e.O()}]);